<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ArsyHost | Premium Image Hosting</title>

<script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
@import url('https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap');
body{font-family:'Outfit',sans-serif;background:#0f172a;color:#f8fafc}
.copy-input{background:rgba(15,23,42,.6);border:1px solid rgba(255,255,255,.1);color:#94a3b8;font-family:'JetBrains Mono'}
.copy-btn{background:linear-gradient(135deg,#4f46e5,#4338ca)}
.toast{background:#1e293b;padding:14px 20px;border-left:4px solid;transform:translateX(120%);transition:.3s}
.toast.show{transform:translateX(0)}
.toast-success{border-color:#10b981}
.toast-error{border-color:#ef4444}
#toast-container{position:fixed;top:24px;right:24px;z-index:100}
</style>
</head>

<body class="min-h-screen flex items-center justify-center p-6">

<div id="toast-container"></div>

<div class="w-full max-w-3xl bg-slate-900/70 border border-slate-700 rounded-3xl p-6">

<!-- Upload -->
<div id="dropZone" class="border-2 border-dashed border-slate-600 rounded-2xl p-14 text-center cursor-pointer">
<input type="file" id="fileInput" hidden accept="image/*">
<i class="fa-solid fa-cloud-arrow-up text-4xl text-indigo-400"></i>
<h3 class="mt-4 text-xl font-bold">Drop image here</h3>
<p class="text-slate-400 text-sm">or click to browse</p>
</div>

<!-- Progress -->
<div id="progressContainer" class="hidden mt-6">
<div class="w-full h-3 bg-slate-800 rounded">
<div id="progressBar" class="h-full bg-indigo-500 w-0"></div>
</div>
</div>

<!-- Result -->
<div id="resultArea" class="hidden mt-6 space-y-4">

<img id="preview" class="w-full h-64 object-cover rounded-xl bg-slate-800">

<div>
<label class="text-xs text-slate-400">Direct URL</label>
<input id="directUrl" readonly class="copy-input w-full p-3 rounded">
</div>

<div>
<label class="text-xs text-slate-400">HTML Embed</label>
<input id="htmlUrl" readonly class="copy-input w-full p-3 rounded">
</div>

<div>
<label class="text-xs text-slate-400">Markdown</label>
<input id="mdUrl" readonly class="copy-input w-full p-3 rounded">
</div>

</div>

</div>

<script>
const dropZone=document.getElementById("dropZone");
const fileInput=document.getElementById("fileInput");
const progress=document.getElementById("progressContainer");
const bar=document.getElementById("progressBar");

dropZone.onclick=()=>fileInput.click();
fileInput.onchange=e=>upload(e.target.files[0]);

function toast(msg,type="success"){
const t=document.createElement("div");
t.className=`toast toast-${type}`;
t.innerText=msg;
document.getElementById("toast-container").appendChild(t);
requestAnimationFrame(()=>t.classList.add("show"));
setTimeout(()=>t.remove(),3000);
}

async function upload(file){
if(!file)return;

progress.classList.remove("hidden");
dropZone.classList.add("hidden");

const form=new FormData();
form.append("file",file);

let w=0;
const anim=setInterval(()=>{if(w<90){w+=5;bar.style.width=w+"%"}},100);

try{
const res=await fetch("https://arsyhost.pages.dev/upload",{
method:"POST",
body:form
});
const data=await res.json();

clearInterval(anim);
bar.style.width="100%";

if(!data.url)throw Error("Upload failed");

const url=data.url;

// preview (document-based image still works)
const img=new Image();
img.onload=()=>document.getElementById("preview").src=url;
img.onerror=()=>toast("Preview load failed","error");
img.src=url;

// outputs
document.getElementById("directUrl").value=url;
document.getElementById("htmlUrl").value=`<img src="${url}" alt="ArsyHost Image">`;
document.getElementById("mdUrl").value=`![ArsyHost Image](${url})`;

progress.classList.add("hidden");
document.getElementById("resultArea").classList.remove("hidden");
toast("Upload successful");

}catch(e){
toast(e.message,"error");
location.reload();
}
}
</script>

</body>
</html>
